{"version":3,"sources":["components/MapClean/MapClean.tsx","reducers/mapReducer.ts","redux/actionTypes.ts","redux/reducers.ts","redux/store.ts","App.tsx","serviceWorker.ts","index.tsx","images/star.svg","images/triangle.svg","images/rectangle.svg"],"names":["timeoutId","svg","zoom","initialState","mapReducer","action","type","payload","rootReducer","combineReducers","mapData","store","createStore","applyMiddleware","thunk","currentSelect","highlightIndex","runFirstTime","MapClean","useState","currentSelectU","setCurrentSelectU","window","innerWidth","sWidth","setWidth","sHeight","setHeight","setting","BrowserText","context","document","createElement","getContext","getWidth","text","fontSize","fontFace","font","measureText","width","objectModification","item","Number","String","replace","Math","abs","handleResize","useEffect","process","star","triangle","rectangle","forEach","picture","Image","src","x","d3","range","domain","y","lastZoom","scaleExtent","translateExtent","on","setTimeout","drawObjects","handleMouseOut","xy1","transform","invert","xy2","x1","y1","x2","y2","node","attr","remove","append","call","imgG","fontSizeT","handleHover","this","getAttribute","handleObjectClick","console","log","stopPropagation","transition","duration","translate","scale","k","index","ObjectCoordinates","length","objectInterface","Object","assign","mY","select","size","shape","includes","insert","Random","integer","txtFont","useX","useY","url","style","html","textWidth","random","rectSizeT","renderImage","addEventListener","loadPercent","setLoadPercent","callback","delay","savedCallback","useRef","current","id","setInterval","clearInterval","useInterval","customC","map","i","height","margin","overflow","className","filter","fromLat","fromLong","toLat","toLong","a","b","sqrt","distance","key","onClick","dispatch","alt","percent","strokeWidth","strokeColor","App","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"qeAmCIA,EAuBAC,EAAKC,E,2DCvDHC,EAAwB,GAUfC,EARW,WAAqD,IAA9BC,EAA6B,uCAC5E,OAAQA,EAAOC,MACb,ICH4B,WDI1B,OAAOD,EAAOE,QAChB,QACE,OAAOJ,IEHEK,EAJYC,YAAgB,CACzCC,QAASN,ICEIO,EAFMC,YAAYJ,EAAaK,YAAgBC,M,oGJ6B1DC,GAAiB,IACjBC,GAAkB,IAElBC,GAAe,EA0eJC,MAndR,WAAqB,IAAD,EACmBC,oBAAU,KAD7B,mBAClBC,EADkB,KACFC,EADE,OAEEF,mBAASG,OAAOC,YAFlB,mBAElBC,EAFkB,KAEVC,EAFU,OAGIN,mBAASG,OAAOC,WAAa,GAHjC,mBAGlBG,EAHkB,KAGTC,EAHS,KAIrBC,EAKO,GAELC,EAAe,WACnB,IACIC,EADSC,SAASC,cAAc,UACfC,WAAW,MAOhC,MAAO,CACLC,SANF,SAAkBC,EAAcC,EAAkBC,GAEhD,OADAP,EAAQQ,KAAOF,EAAW,MAAQC,EAC3BP,EAAQS,YAAYJ,GAAMK,MAAQ,IANxB,GAcrB,SAASC,EAAmBC,GAQ1B,OAPAA,EAAI,SAAeC,OAAOC,OAAOF,EAAI,UAAcG,QAAQ,YAAa,KACxEH,EAAI,UAAgBC,OAAOC,OAAOF,EAAI,WAAeG,QAAQ,YAAa,KACtEH,EAAI,SAAe,EACrBA,EAAI,UAAgBI,KAAKC,IAAIJ,OAAOD,EAAI,WAExCA,EAAI,SAAeI,KAAKC,IAAIJ,OAAOD,EAAI,WAElCA,EAQT,SAASM,IACPvB,EAASH,OAAOC,YAChBI,EAAUL,OAAOC,WAAa,GAPhC0B,qBAAU,YAUV,WACE,CAACC,qBAAwCA,oBAAuCC,IAAMC,IAAUC,KAAWC,SACvG,SAACC,IACa,IAAIC,OACZC,IAAMF,KAGhB,IAAMG,EAAIC,gBAAiBC,MAAM,CAAC,EAAGpC,IAASqC,OAAO,EAAE,IAAK,MACtDC,EAAIH,gBAAiBC,MAAM,CAAC,EAAGlC,IAAUmC,OAAO,EAAE,GAAI,KACxDE,EAAW,EAOf7D,EAAOyD,SAEFK,YAAY,CAAC,EAAGpC,IAChBqC,gBAAgB,CACf,CAAC,EAAG,GACJ,CAACzC,EAAQE,KAEVwC,GAAG,QAyBR,YAyDA,WAE0BlD,KAExBA,GAAkB,OAEhBA,GAAkB,KAHGD,IAKEA,GAEvBM,EADAN,GAAiB,KAIdf,IACHA,EAAYsB,OAAO6C,YAAW,WAC5BnE,EAAY,KACZoE,MACC,MAzELC,GACA,IAAMC,EAAMX,QAASY,UAAUC,OAAO,CAAC,EAAG,IACpCC,EAAMd,QAASY,UAAUC,OAAO,CAAChD,EAAQE,KACtC,CACPgD,GAAIJ,EAAI,GACRK,GAAIL,EAAI,GACRM,GAAIH,EAAI,GACRI,GAAIJ,EAAI,KAEVK,EAAKC,KAAK,YAAapB,QAASY,WAChCH,OAlCFT,SAAU,oBAAoBqB,SAG9B,IAAIF,GADJ7E,EAAM0D,SAAU,gBAAgBsB,OAAO,OAAOF,KAAK,QAASvD,GAAQuD,KAAK,SAAUrD,IACpEuD,OAAO,KACtBhF,EAAIiF,KAAKhF,GACT,IAAIiF,EAAOL,EAAKG,OAAO,KAgCvB,SAAS7C,IACP,IAAIgD,EAAY,GAwBhB,OAvBiB,IAAbrB,IACEA,EAAW,EACbqB,EAAY,EACHrB,EAAW,GACpBqB,EAAY,EACHrB,EAAW,GACpBqB,EAAY,EACHrB,EAAW,GACpBqB,EAAY,EACHrB,EAAW,GACpBqB,EAAY,IACHrB,EAAW,GACpBqB,EAAY,EACHrB,EAAW,GACpBqB,EAAY,IACHrB,GAAY,KACrBqB,EAAY,IAOTA,EAOT,SAASC,IAEPrE,EAAiB2B,OADH2C,KACgBC,aAAa,UACvCxE,GAAiBC,IAEnBK,EADAN,GAAiB,KAEjBf,EAAY,KACZoE,KAyBJ,SAASoB,IAGPzE,EAAgB4B,OADF2C,KACeC,aAAa,UAE1ClE,EAAkBN,GAClB,IAAI2C,EAAIf,OAJM2C,KAIOC,aAAa,MAC9BzB,EAAInB,OALM2C,KAKOC,aAAa,MAClCE,QAAQC,IAAIhC,GACZ+B,QAAQC,IAAI5B,GACP,EAADJ,EAA4B,IAANlC,IACxBkC,EAAIlC,EAASA,EAVC,EAUoB,GAE/B,EAADkC,EAA+B,GAATlC,IACxBkC,EAAIlC,EAbU,EAaW,GAEtB,EAADsC,EAA6B,IAAPpC,IACxBoC,EAAIpC,EAAUA,EAhBA,EAgBsB,GAEjC,EAADoC,EAAgC,GAAVpC,IACxBoC,EAAIpC,EAnBU,EAmBY,GAE5BiC,QAASgC,kBAET1F,EACK2F,aACAC,SAAS,KACTX,KAEGhF,EAAKqE,UACLZ,eACKmC,UAAUtE,EAAS,EAAGE,EAAU,GAChCqE,MA/BG,GAgCHD,WAAWpC,GAAII,IAK9B,SAASM,IAGP,KAAMT,GAAMA,SAAYA,QAASY,YAAcR,IAAaJ,QAASY,UAAUyB,EAAG,CAC5ErC,GAAMA,SAAYA,QAASY,YAC7BR,EAAWJ,QAASY,UAAUyB,GAEhC,IAAK,IAAIC,EAAQ,EAAGA,EAAQC,EAAkBC,OAAQF,IAAS,CAC7D,IAAIG,EAAmCF,EAAkBD,GACnDvD,EAAOD,EAAmB4D,OAAOC,OAAO,GAAIF,IAG9CG,EAAKzC,EAAEnB,OAAOD,EAAI,WACtB,GAAIzB,GAAyE,IAAzD6D,EAAK0B,OAAO,kBAAoBP,EAAQ,MAAMQ,OAAc,CAC9E,IAAIC,EAAQvD,IACRT,EAAI,iBAAqBiE,SAAS,KACpCD,EAAQtD,IACCV,EAAI,iBAAqBiE,SAAS,OAC3CD,EAAQrD,KAEGyB,EACR8B,OAAO,aACP7B,KAAK,QAAS,UACdA,KAAK,sBAAuB,QAC5BA,KAAK,IAAKrB,EAAEf,OAAOD,EAAI,aACvBqC,KAAK,IAAKwB,GACVxB,KAAK,SAAU,WACfA,KAAK,QAASkB,GACd/B,GAAG,QAASsB,GACZtB,GAAG,YAAamB,GAChBN,KAAK,aAAc2B,GACnB3B,KAAK,UAAW,KAChBa,aAAaC,UAAS,IAAIgB,KAASC,QAAQ,IAAK,MAAO/B,KAAK,UAAW,KAG9EwB,GADAA,EAAKA,EAAK,GAAK,GAAKA,GACV7E,EAAU,GAAK6E,EAAK,GAAKA,EACnC,IAAIQ,EAAU3E,IACd,GAAKpB,GAAkBA,IAAmBiF,GAAUlF,IAAkBkF,EAAO,CAC3E,GAAkE,IAA9DnB,EAAK0B,OAAO,uBAAyBP,EAAQ,MAAMQ,OAAc,CACnE,IAAIO,EAAOtD,EAAEf,OAAOD,EAAI,YAAkB,EACtClB,EAASA,EAAS,EAAIkC,EAAEf,OAAOD,EAAI,cACrCsE,EAAOtD,EAAEf,OAAOD,EAAI,YAAkB,IAExC,IAAIuE,EAAOV,EAAK,GACZU,EAAO,KACTA,GAAQ,IAEV,IAAMC,EACFnG,IAAkBkF,EACZ/C,qBACAA,oBACJuD,EAAO1F,IAAkBkF,EAAQ,GAAK,GAC5CnB,EACK8B,OAAO,aACP7B,KAAK,QAAS,eACdA,KAAK,QAASkB,GACdlB,KAAK,IAAKiC,GACVjC,KAAK,IAAKkC,GACVlC,KAAK,QAAS0B,GACd1B,KAAK,SAAU,IACfA,KAAK,aAAcmC,GACxBpC,EAAKG,OAAO,QACPF,KAAK,IAAIiC,GACTjC,KAAK,QAAQ,eACbA,KAAK,IAAIkC,GACTlC,KAAK,QAAS0B,GACd1B,KAAK,QAASkB,GACdlB,KAAK,SAAS,IACdoC,MAAM,OAAQ,eACdA,MAAM,SAAU,SAChBA,MAAM,eAAgB,SAE7B,GAA4D,IAAxDrC,EAAK0B,OAAO,iBAAmBP,EAAQ,MAAMQ,OAClC3B,EACRG,OAAO,QACPF,KAAK,QAAS,SACdA,KAAK,OAAQ,SACbA,KAAK,IAAKrB,EAAEf,OAAOD,EAAI,aACvBqC,KAAK,IAAKwB,GACVxB,KAAK,cAAe,SACpBA,KAAK,SAAU,WACfA,KAAK,QAASkB,GACdlB,KAAK,YAAagC,EAAU,EAAI,MAChCK,KAAK1E,EAAK,iBACVwB,GAAG,QAASsB,GACZtB,GAAG,YAAamB,GAChBN,KAAK,UAAW,KAChBa,aAAaC,UAAS,IAAIgB,KAASC,QAAQ,IAAK,MAAO/B,KAAK,UAAW,UAElD,MAAnBhE,IACT+D,EAAK0B,OAAO,uBAAyBP,EAAQ,MAAMjB,SACnDF,EAAK0B,OAAO,iBAAmBP,EAAQ,MAAMjB,SAC7CF,EAAK0B,OAAO,uBAAyBP,EAAQ,MAAMjB,UAGrD,IAAIqC,EAAY,EACZ7F,EAASA,EAAS,EAAIkC,EAAEf,OAAOD,EAAI,cACrC2E,GAAaxF,EAAYK,SAASQ,EAAK,gBAAiBqE,EAAS,SAAW,GAE9E,IAAMO,GAAS,IAAIT,KAASC,QAAQ,IAAK,KACrCS,EA7KDnF,IAAa,GA8KXuB,GAAMA,SAAYA,QAASY,WAActD,IAC5C6D,EACK0B,OAAO,kBAAoBP,EAAQ,MAEnCL,aACAC,SAASyB,GACTvC,KAAK,YAAa,cAAgBwC,EAAY,EAAI,KAAOA,EAAY,EAAI,KACzExC,KAAK,SAAUwC,GACfxC,KAAK,QAASwC,GACdxC,KAAK,UAAW,MAGlBhB,EAAW,GAAM/C,GAAkBA,IAAmBiF,GAAUlF,IAAkBkF,IACnFnB,EAAK0B,OAAO,iBAAmBP,EAAQ,MAAMQ,OAAS,EAExD3B,EACK0B,OAAO,iBAAmBP,EAAQ,MAElCL,aACAC,SAASyB,GACTvC,KAAK,YAAagC,EAAU,MAC5BhC,KAAK,YAAa,cAAgBsC,EAAY,GAAK,OACnDtC,KAAK,UAAW,KAErBD,EAAK0B,OAAO,iBAAmBP,EAAQ,MAAMjB,SAGjD/D,GAAe,GArQnBkE,EACKyB,OAAO,aACP7B,KAAK,sBAAuB,QAC5BA,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAASvD,GACduD,KAAK,SAAUrD,GACfqD,KAAK,aAAc7B,+BACxBiC,EACKyB,OAAO,aACP7B,KAAK,sBAAuB,QAC5BA,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAASvD,GACduD,KAAK,SAAUrD,GACfqD,KAAK,aAAc7B,6BA2PxBkB,IAlTAoD,GACAlG,OAAOmG,iBAAiB,SAAUzE,KACjC,CAACxB,EAAQE,IAvCa,MA4XaP,mBAAS,GA5XtB,mBA4XlBuG,EA5XkB,KA4XLC,EA5XK,MArB3B,SAAqBC,EAAsBC,GACzC,IAAMC,EAAgBC,mBACtB9E,qBAAU,WAER6E,EAAcE,QAAUJ,IACvB,CAACA,IAEJ3E,qBAAU,WAMR,GAAc,OAAV4E,EAAgB,CAClB,IAAII,EAAKC,aANX,WAEEJ,EAAcE,YAIaH,GAC3B,OAAO,kBAAMM,cAAcF,OAE5B,CAACJ,IAiYJO,EAAY,WACNV,EAAc,KAChBC,EAAeD,GAAc,IAAIb,KAASC,QAAQ,EAAG,OAEtD,KAeH,IAAMuB,EAAUnC,EAAkBoC,KAAI,SAAC5F,EAAMuD,GAAP,OAAiBxD,EAAmB4D,OAAOC,OAAO,CAAEiC,EAAGtC,GAASvD,OAEtG,OACI,oCACE,yBACIuF,GAAG,cACHd,MAAO,CACL3E,MAAOhB,EAAS,KAChBgH,OAAQ9G,EAAU,KAClB+G,OAAQ,SACRC,SAAU,UAEZC,UAAWjB,GAAe,IAAM,GAAK,UAEtCtG,GAAkBA,GAAkB,GACjC,yBAAKuH,UAAU,gBACZN,EAMIO,QAAO,SAAClG,GAOP,OA3CpB,SAAkBmG,EAAcC,EAAeC,EAAYC,GAOzD,IAAIC,EAAIF,EAAQF,EACZK,EAAIF,EAASF,EAGjB,OAFQhG,KAAKqG,KAAKF,EAAIA,EAAIC,EAAIA,GA4BCE,CACTf,EAAQjH,GAAR,SACAiH,EAAQjH,GAAR,UACAsB,EAAI,SACJA,EAAI,WAEM,MAEf4F,KAAI,SAAC5F,EAAuBuD,GAC3B,IAAIS,EAAQvD,IAMZ,OALIT,EAAI,iBAAqBiE,SAAS,KACpCD,EAAQtD,IACCV,EAAI,iBAAqBiE,SAAS,OAC3CD,EAAQrD,KAGN,yBACIgG,IAAKpD,EACL0C,UAAU,eACVW,QAAS,WACH3F,SAAU,kBAAoBjB,EAAK6F,EAAI,MAAM9B,OAAS,IACxD9C,SAAU,UAAUqB,SACpBrB,SAAU,gBAAgBqB,SAC1BrB,SAAU,kBAAoBjB,EAAK6F,EAAI,MAAMgB,SAAS,YAI5D,yBAAK9F,IAAKiD,EAAO8C,IAAI,KACpB9G,EAAK,sBAO1B,yBAAKiG,UAAW,WAAajB,GAAe,IAAM,SAAW,KAC3D,yBAAKiB,UAAU,gBACb,kBAAC,IAAD,CAAMc,QAAS/B,EAAagC,YAAa,EAAGC,YAAY,gBKrfrDC,G,cAVH,WACV,OACE,kBAAC,IAAD,CAAUjJ,MAAOA,GACf,yBAAKgI,UAAU,OACb,kBAAC,EAAD,UCAYkB,QACW,cAA7BvI,OAAOwI,SAASC,UAEe,UAA7BzI,OAAOwI,SAASC,UAEhBzI,OAAOwI,SAASC,SAASC,MAAM,2DCZnCC,IAASC,OAAO,kBAAC,EAAD,MAASnI,SAASoI,eAAe,SD4H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAACC,GAClCA,EAAaC,iB,qxiOEnInBC,EAAOC,QAAU,IAA0B,kC,mBCA3CD,EAAOC,QAAU,IAA0B,sC,mBCA3CD,EAAOC,QAAU,IAA0B,wC","file":"static/js/main.5e89b196.chunk.js","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport \"./MapClean.scss\";\nimport * as d3 from \"d3\";\nimport ObjectCoordinates from \"../../data/datafile.json\";\nimport { Random } from \"random-js\";\nimport star from \"../../images/star.svg\";\nimport triangle from \"../../images/triangle.svg\";\nimport rectangle from \"../../images/rectangle.svg\";\nimport { Line } from \"rc-progress\";\n\ninterface ObjectInterface {\n  i?: number | null;\n  Caldwell_Messier: string;\n  \"WISE Objects\": string;\n  L: string | number;\n  B: string | number;\n  Longitude: string | number;\n  Latitude: string | number;\n  \"size in degrees\": string | number | null;\n  \"HST image\": string;\n  Orientation: string | null | number;\n  \"Pending Caldwell add.\": string | null | number;\n  Birthday: string | null | number;\n  Category: string | null | number;\n  n: string | null | number;\n  date: string | null | number;\n  year: string | null | number;\n  name: string | null | number;\n  text: string | null | number;\n  url: string | null | number;\n}\n\nlet drawCounter = 0;\nlet currentSelect = -100;\nlet highlightIndex = -100;\nlet timeoutId: any;\nlet runFirstTime = true;\n\nfunction useInterval(callback: () => void, delay: number | null) {\n  const savedCallback = useRef();\n  useEffect(() => {\n    // @ts-ignore\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    function tick() {\n      // @ts-ignore\n      savedCallback.current();\n    }\n\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n//@ts-ignore\nlet svg, zoom;\nexport function MapClean() {\n  const [currentSelectU, setCurrentSelectU] = useState(-100);\n  const [sWidth, setWidth] = useState(window.innerWidth);\n  const [sHeight, setHeight] = useState(window.innerWidth / 2);\n  let setting = {\n    width: sWidth,\n    height: sHeight,\n    fontSize: 6,\n    circleSize: 2.2,\n    maxZoom: 40,\n  };\n  const BrowserText = (function () {\n    let canvas = document.createElement(\"canvas\") as HTMLCanvasElement;\n    let context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n\n    function getWidth(text: string, fontSize: number, fontFace: string): number {\n      context.font = fontSize + \"px \" + fontFace;\n      return context.measureText(text).width + 4;\n    }\n\n    return {\n      getWidth: getWidth,\n    };\n  })();\n\n  function objectModification(item: ObjectInterface): ObjectInterface {\n    item[\"Latitude\"] = Number(String(item[\"Latitude\"]).replace(/[^0-9.-]/g, \"\"));\n    item[\"Longitude\"] = Number(String(item[\"Longitude\"]).replace(/[^0-9.-]/g, \"\"));\n    if (item[\"Latitude\"] > 0) {\n      item[\"Latitude\"] = -Math.abs(Number(item[\"Latitude\"]));\n    } else {\n      item[\"Latitude\"] = Math.abs(Number(item[\"Latitude\"]));\n    }\n    return item;\n  }\n\n  useEffect(() => {\n    renderImage();\n    window.addEventListener(\"resize\", handleResize);\n  }, [sWidth, sHeight]);\n\n  function handleResize() {\n    setWidth(window.innerWidth);\n    setHeight(window.innerWidth / 2);\n  }\n\n  function renderImage() {\n    [process.env.PUBLIC_URL + \"/c21-12.png\", process.env.PUBLIC_URL + \"/c21-1.png\", star, triangle, rectangle].forEach(\n        (picture) => {\n          const img = new Image();\n          img.src = picture;\n        },\n    );\n    const x = d3.scaleLinear().range([0, sWidth]).domain([-180, 180]);\n    const y = d3.scaleLinear().range([0, sHeight]).domain([-90, 90]);\n    let lastZoom = 1;\n    let coords = {\n      x1: 0,\n      y1: 0,\n      x2: sWidth,\n      y2: sHeight,\n    };\n    zoom = d3\n        .zoom<any, unknown>()\n        .scaleExtent([1, setting.maxZoom])\n        .translateExtent([\n          [0, 0],\n          [sWidth, sHeight],\n        ])\n        .on(\"zoom\", zoomed);\n\n    d3.select(\"#render_map2 svg\").remove();\n    //@ts-ignore\n    svg = d3.select(\"#render_map2\").append(\"svg\").attr(\"width\", sWidth).attr(\"height\", sHeight);\n    var node = svg.append(\"g\");\n    svg.call(zoom);\n    var imgG = node.append(\"g\");\n    imgG\n        .insert(\"svg:image\")\n        .attr(\"preserveAspectRatio\", \"none\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"width\", sWidth)\n        .attr(\"height\", sHeight)\n        .attr(\"xlink:href\", process.env.PUBLIC_URL + \"/img-set/image-1.jpg\");\n    imgG\n        .insert(\"svg:image\")\n        .attr(\"preserveAspectRatio\", \"none\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"width\", sWidth)\n        .attr(\"height\", sHeight)\n        .attr(\"xlink:href\", process.env.PUBLIC_URL + \"/img-set/image.jpg\");\n\n    function zoomed() {\n      handleMouseOut();\n      const xy1 = d3.event.transform.invert([0, 0]);\n      const xy2 = d3.event.transform.invert([sWidth, sHeight]);\n      coords = {\n        x1: xy1[0],\n        y1: xy1[1],\n        x2: xy2[0],\n        y2: xy2[1],\n      };\n      node.attr(\"transform\", d3.event.transform);\n      drawObjects();\n    }\n\n    function fontSize(): number {\n      let fontSizeT = 12;\n      if (lastZoom !== 1) {\n        if (lastZoom < 5) {\n          fontSizeT = 6;\n        } else if (lastZoom < 10) {\n          fontSizeT = 5;\n        } else if (lastZoom < 15) {\n          fontSizeT = 4;\n        } else if (lastZoom < 20) {\n          fontSizeT = 3;\n        } else if (lastZoom < 25) {\n          fontSizeT = 2.5;\n        } else if (lastZoom < 30) {\n          fontSizeT = 2;\n        } else if (lastZoom < 35) {\n          fontSizeT = 1.5;\n        } else if (lastZoom <= 40) {\n          fontSizeT = 1;\n        }\n      }\n      if (fontSizeT < 2) {\n        //fontSizeT = 2;\n      }\n\n      return fontSizeT;\n    }\n\n    function rectSize(): number {\n      return fontSize() / 2;\n    }\n\n    function handleHover() {\n      const $this = this as HTMLElement;\n      highlightIndex = Number($this.getAttribute(\"index\"));\n      if (currentSelect != highlightIndex) {\n        currentSelect = -100;\n        setCurrentSelectU(currentSelect);\n        timeoutId = null;\n        drawObjects();\n      }\n    }\n\n    function handleMouseOut() {\n      const $this = this as HTMLElement;\n      let highlightIndexOld = highlightIndex;\n      let currentSelectOld = currentSelect;\n      highlightIndex = -100;\n      if (highlightIndexOld !== highlightIndex) {\n        highlightIndex = -100;\n      }\n      if (currentSelectOld !== currentSelect) {\n        currentSelect = -100;\n        setCurrentSelectU(currentSelect);\n      }\n\n      if (!timeoutId) {\n        timeoutId = window.setTimeout(function () {\n          timeoutId = null;\n          drawObjects();\n        }, 100);\n      }\n    }\n\n    function handleObjectClick() {\n      let zoomLevel = 6;\n      const $this = this as HTMLElement;\n      currentSelect = Number($this.getAttribute(\"index\"));\n\n      setCurrentSelectU(currentSelect);\n      let x = Number($this.getAttribute(\"x\"));\n      let y = Number($this.getAttribute(\"y\"));\n      console.log(x);\n      console.log(y);\n      if (x * (zoomLevel - 1) > sWidth * (zoomLevel - 1.5)) {\n        x = sWidth - sWidth / zoomLevel / 2;\n      }\n      if (x * (zoomLevel - 1) < sWidth * 0.5) {\n        x = sWidth / zoomLevel / 2;\n      }\n      if (y * (zoomLevel - 1) > sHeight * (zoomLevel - 1.5)) {\n        y = sHeight - sHeight / zoomLevel / 2;\n      }\n      if (y * (zoomLevel - 1) < sHeight * 0.5) {\n        y = sHeight / zoomLevel / 2;\n      }\n      d3.event.stopPropagation();\n      //@ts-ignore\n      svg\n          .transition()\n          .duration(500)\n          .call(\n              //@ts-ignore\n              zoom.transform,\n              d3.zoomIdentity\n                  .translate(sWidth / 2, sHeight / 2)\n                  .scale(zoomLevel)\n                  .translate(-x, -y),\n              //d3.mouse($this),\n          );\n    }\n\n    function drawObjects() {\n      drawCounter++;\n      //console.log(\"Draw Start: \" + drawCounter)\n      if (!(d3 && d3.event && d3.event.transform) || lastZoom !== d3.event.transform.k) {\n        if (d3 && d3.event && d3.event.transform) {\n          lastZoom = d3.event.transform.k;\n        }\n        for (let index = 0; index < ObjectCoordinates.length; index++) {\n          let objectInterface: ObjectInterface = ObjectCoordinates[index];\n          const item = objectModification(Object.assign({}, objectInterface));\n          //currentSelect\n          //console.log(item)\n          let mY = y(Number(item[\"Latitude\"]));\n          if (runFirstTime && node.select(\".coords[index='\" + index + \"']\").size() === 0) {\n            let shape = star;\n            if (item[\"Caldwell_Messier\"].includes(\"C\")) {\n              shape = triangle;\n            } else if (item[\"Caldwell_Messier\"].includes(\"M\")) {\n              shape = rectangle;\n            }\n            const rect = node\n                .insert(\"svg:image\")\n                .attr(\"class\", \"coords\")\n                .attr(\"preserveAspectRatio\", \"none\")\n                .attr(\"x\", x(Number(item[\"Longitude\"])))\n                .attr(\"y\", mY)\n                .attr(\"cursor\", \"pointer\")\n                .attr(\"index\", index)\n                .on(\"click\", handleObjectClick)\n                .on(\"mouseover\", handleHover)\n                .attr(\"xlink:href\", shape)\n                .attr(\"opacity\", \"0\");\n            rect.transition().duration(new Random().integer(500, 2000)).attr(\"opacity\", \"1\");\n          }\n          mY = mY < 10 ? 10 : mY;\n          mY = mY > sHeight - 10 ? mY - 10 : mY;\n          let txtFont = fontSize();\n          if ((highlightIndex && highlightIndex === index) || currentSelect === index) {\n            if (node.select(\".hover_image[index='\" + index + \"']\").size() === 0) {\n              let useX = x(Number(item[\"Longitude\"])) + 5;\n              if (sWidth - sWidth / 4 < x(Number(item[\"Longitude\"]))) {\n                useX = x(Number(item[\"Longitude\"])) - 30;\n              }\n              let useY = mY - 22;\n              if (useY < 50) {\n                useY += 24;\n              }\n              const url =\n                  currentSelect === index\n                      ? process.env.PUBLIC_URL + \"/c21-12.png\"\n                      : process.env.PUBLIC_URL + \"/c21-1.png\";\n              const size = currentSelect === index ? 30 : 25;\n              node\n                  .insert(\"svg:image\")\n                  .attr(\"class\", \"hover_image\")\n                  .attr(\"index\", index)\n                  .attr(\"x\", useX)\n                  .attr(\"y\", useY)\n                  .attr(\"width\", size)\n                  .attr(\"height\", 16)\n                  .attr(\"xlink:href\", url);\n              node.append(\"rect\")\n                  .attr(\"x\",useX)\n                  .attr(\"class\",\"rect-border\")\n                  .attr(\"y\",useY)\n                  .attr(\"width\", size)\n                  .attr(\"index\", index)\n                  .attr(\"height\",16)\n                  .style(\"fill\", \"transparent\")\n                  .style(\"stroke\", \"green\")\n                  .style(\"stroke-width\", \"0.5px\");\n            }\n            if (node.select(\".label[index='\" + index + \"']\").size() === 0) {\n              const text = node\n                  .append(\"text\")\n                  .attr(\"class\", \"label\")\n                  .attr(\"fill\", \"white\")\n                  .attr(\"x\", x(Number(item[\"Longitude\"])))\n                  .attr(\"y\", mY)\n                  .attr(\"font-family\", \"Arial\")\n                  .attr(\"cursor\", \"pointer\")\n                  .attr(\"index\", index)\n                  .attr(\"font-size\", txtFont - 1 + \"px\")\n                  .html(item[\"WISE Objects\"])\n                  .on(\"click\", handleObjectClick)\n                  .on(\"mouseover\", handleHover)\n                  .attr(\"opacity\", \"0\");\n              text.transition().duration(new Random().integer(100, 1000)).attr(\"opacity\", \"1\");\n            }\n          } else if (currentSelect === -100) {\n            node.select(\".hover_image[index='\" + index + \"']\").remove();\n            node.select(\".label[index='\" + index + \"']\").remove();\n            node.select(\".rect-border[index='\" + index + \"']\").remove();\n\n          }\n          let textWidth = 4;\n          if (sWidth - sWidth / 4 < x(Number(item[\"Longitude\"]))) {\n            textWidth = -BrowserText.getWidth(item[\"WISE Objects\"], txtFont, \"Arial\") - 6;\n          }\n          const random = new Random().integer(100, 200);\n          let rectSizeT = rectSize();\n          if ((d3 && d3.event && d3.event.transform) || runFirstTime) {\n            node\n                .select(\".coords[index='\" + index + \"']\")\n                //@ts-ignore\n                .transition()\n                .duration(random)\n                .attr(\"transform\", \"translate(-\" + rectSizeT / 2 + \",-\" + rectSizeT / 2 + \")\")\n                .attr(\"height\", rectSizeT)\n                .attr(\"width\", rectSizeT)\n                .attr(\"opacity\", \"1\");\n          }\n          if (\n              (lastZoom > 1 || (highlightIndex && highlightIndex === index) || currentSelect === index) &&\n              node.select(\".label[index='\" + index + \"']\").size() > 0\n          ) {\n            node\n                .select(\".label[index='\" + index + \"']\")\n                //@ts-ignore\n                .transition()\n                .duration(random)\n                .attr(\"font-size\", txtFont + \"px\")\n                .attr(\"transform\", \"translate(\" + (textWidth + 1) + \",0)\")\n                .attr(\"opacity\", \"1\");\n          } else {\n            node.select(\".label[index='\" + index + \"']\").remove();\n          }\n        }\n        runFirstTime = false;\n      }\n      //console.log(\"Draw End: \" + drawCounter)\n    }\n\n    drawObjects();\n  }\n  function clusterObjClick(item: ObjectInterface) {\n    let zoomLevel = 6;\n    const $this = this as HTMLElement;\n    currentSelect = Number(item.i);\n    setCurrentSelectU(currentSelect);\n    let x = Number($this.getAttribute(\"x\"));\n    let y = Number($this.getAttribute(\"y\"));\n    if (x * (zoomLevel - 1) > sWidth * (zoomLevel - 1.5)) {\n      x = sWidth - sWidth / zoomLevel / 2;\n    }\n    if (x * (zoomLevel - 1) < sWidth * 0.5) {\n      x = sWidth / zoomLevel / 2;\n    }\n    if (y * (zoomLevel - 1) > sHeight * (zoomLevel - 1.5)) {\n      y = sHeight - sHeight / zoomLevel / 2;\n    }\n    if (y * (zoomLevel - 1) < sHeight * 0.5) {\n      y = sHeight / zoomLevel / 2;\n    }\n    d3.event.stopPropagation();\n    //@ts-ignore\n    svg\n        .transition()\n        .duration(500)\n        .call(\n            //@ts-ignore\n            zoom.transform,\n            d3.zoomIdentity\n                .translate(sWidth / 2, sHeight / 2)\n                .scale(zoomLevel)\n                .translate(-x, -y),\n            d3.mouse($this),\n        );\n  }\n  // @ts-ignore\n  const [loadPercent, setLoadPercent] = useState(0);\n  useInterval(() => {\n    if (loadPercent < 100) {\n      setLoadPercent(loadPercent + new Random().integer(0, 15));\n    }\n  }, 1000); // change it to 1000\n  function distance(fromLat: any, fromLong: any, toLat: any, toLong: any) {\n    // var a = lat1 - lat2;\n    // var b = lon1 - lon2;\n    // var c = Math.sqrt(a * a + b * b);\n    //\n    // return c;\n\n    var a = toLat - fromLat;\n    var b = toLong - fromLong;\n    var c = Math.sqrt(a * a + b * b);\n\n    return c;\n  }\n\n  const customC = ObjectCoordinates.map((item, index) => objectModification(Object.assign({ i: index }, item)));\n\n  return (\n      <>\n        <div\n            id=\"render_map2\"\n            style={{\n              width: sWidth + \"px\",\n              height: sHeight + \"px\",\n              margin: \"0 auto\",\n              overflow: \"hidden\",\n            }}\n            className={loadPercent >= 100 ? \"\" : \"hidden\"}\n        >\n          {currentSelectU && currentSelectU >= 0 && (\n              <div className=\"display-area\">\n                {customC\n                    //.sort((a, b) => {\n                    //  const distA = distance(a[\"Latitude\"], a[\"Longitude\"], customC[currentSelectU][\"Latitude\"], customC[currentSelectU][\"Latitude\"]);\n                    //  const distB = distance(b[\"Latitude\"], b[\"Longitude\"], customC[currentSelectU][\"Latitude\"], customC[currentSelectU][\"Latitude\"]);\n                    //  return distB - distA;\n                    //})\n                    .filter((item) => {\n                      const dist = distance(\n                          customC[currentSelectU][\"Latitude\"],\n                          customC[currentSelectU][\"Longitude\"],\n                          item[\"Latitude\"],\n                          item[\"Longitude\"],\n                      );\n                      return dist < 20;\n                    })\n                    .map((item: ObjectInterface, index) => {\n                      let shape = star;\n                      if (item[\"Caldwell_Messier\"].includes(\"C\")) {\n                        shape = triangle;\n                      } else if (item[\"Caldwell_Messier\"].includes(\"M\")) {\n                        shape = rectangle;\n                      }\n                      return (\n                          <div\n                              key={index}\n                              className=\"display-item\"\n                              onClick={() => {\n                                if (d3.select(\".coords[index='\" + item.i + \"']\").size() > 0) {\n                                  d3.select(\".label\").remove();\n                                  d3.select(\".hover_image\").remove();\n                                  d3.select(\".coords[index='\" + item.i + \"']\").dispatch(\"click\");\n                                }\n                              }}\n                          >\n                            <img src={shape} alt=\"\" />\n                            {item[\"WISE Objects\"]}\n                          </div>\n                      );\n                    })}\n              </div>\n          )}\n        </div>\n        <div className={\"loader \" + (loadPercent >= 100 ? \"loaded\" : \"\")}>\n          <div className=\"loader-inner\">\n            <Line percent={loadPercent} strokeWidth={2} strokeColor=\"#D3D3D3\" />\n          </div>\n        </div>\n      </>\n  );\n}\n\nexport default MapClean;","import { MAP_DATA } from \"../redux/actionTypes\";\nimport { getMapDataAction, MapData } from \"../redux/types\";\n\nconst initialState: MapData = [];\n\nexport const mapReducer = (state = initialState, action: getMapDataAction) => {\n  switch (action.type) {\n    case MAP_DATA:\n      return action.payload;\n    default:\n      return initialState;\n  }\n};\nexport default mapReducer;\n","export const APP_ERROR: string = \"APP_ERROR\";\nexport const APP_SUCCESS: string = \"APP_SUCCESS\";\nexport const APP_MESSAGES: string = \"APP_MESSAGES\";\n\nexport const MAP_DATA: string = \"MAP_DATA\";\n","import { combineReducers } from \"redux\";\nimport mapReducer from \"../reducers/mapReducer\";\n\nexport const rootReducer = combineReducers({\n  mapData: mapReducer,\n});\n\nexport default rootReducer;\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers\";\n\nexport const store = createStore(rootReducer, applyMiddleware(thunk));\n\nexport default store;\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\nimport MapClean from \"./components/MapClean/MapClean\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.scss\";\n\nconst App = () => {\n  return (\n    <Provider store={store}>\n      <div className=\"App\">\n        <MapClean />\n      </div>\n    </Provider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/star.19b34dbf.svg\";","module.exports = __webpack_public_path__ + \"static/media/triangle.d7fed549.svg\";","module.exports = __webpack_public_path__ + \"static/media/rectangle.87c696b9.svg\";"],"sourceRoot":""}